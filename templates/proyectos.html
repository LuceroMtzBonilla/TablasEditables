{% extends "base.html" %}

{% block content %}

    <head>
        <meta charset="utf-8"/>
        <title>Proyectos</title>
        <meta content="Proyectos" property="og:title"/>
        <meta content="Proyectos" property="twitter:title"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="Webflow" name="generator"/>
        <link href="https://uploads-ssl.webflow.com/6413bfb09d689f2db308c738/css/proyectos-editables.webflow.ad3267a1d.css" rel="stylesheet" type="text/css"/>
        <!--[if lt IE 9]>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript">
            </script>
        <![endif]-->
        <script type="text/javascript">
        !function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
        </script>
        <link href="https://uploads-ssl.webflow.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
        <link href="https://uploads-ssl.webflow.com/img/webclip.png" rel="apple-touch-icon"/>
    </head>
    <body>
        <div class="navbar-logo-center wf-section">
            <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-center-container shadow-three w-nav">
                <div class="container">
                    <div class="navbar-wrapper-three">
                        <div class="menu-button w-nav-button">
                            <div class="w-icon-nav-menu">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div data-current="Tab 1" data-easing="ease" data-duration-in="300" data-duration-out="100" class="w-tabs">
            <div class="w-tab-menu">
                {% for i in range(num_projects) %}
                <a data-w-tab="Tab {{ i+1 }}" class="w-inline-block w-tab-link {% if i == 0 %}w--current{% endif %}">
                    <div>Proyecto {{ i+1 }}</div>
                </a>
                {% endfor %}
                <form method="POST" action="{{ url_for('add_tab') }}"><button type="submit">Agregar Tab</button></form>
            </div>
            <div class="w-tab-content">
                {% for i in range(num_projects) %}
                <div data-w-tab="Tab {{ i+1 }}" class="w-tab-pane {% if i == 0 %}w--tab-active{% endif %}">
                    <iframe src="{{ url_for('tables', project_number=i+1) }}" style="width:100%; height:500px;"></iframe>
                </div>
                {% endfor %}
            </div>
        </div>
        <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6413bfb09d689f2db308c738" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">

        </script>
        <script src="https://uploads-ssl.webflow.com/6413bfb09d689f2db308c738/js/webflow.81b9f3658.js" type="text/javascript">

        </script>
        <!--[if lte IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js">

            </script>
        <![endif]-->
        <script>
            function addTab() {
            // get the number of current tabs
            var tabCount = $("#tabs ul li").length;

            // add a new tab
            var newTab = $("<li><a href='#tabs-" + (tabCount+1) + "'>New Tab</a></li>");
            $("#tabs ul").append(newTab);

            // add the new tab content
            var newTabContent = $("<div id='tabs-" + (tabCount+1) + "'></div>");
            newTabContent.html("<iframe src='" + "{{ url_for('tables', project_number=" + (tabCount+1) + ") }}" + "' style='width:100%; height:500px;'></iframe>");
            $("#tabs").append(newTabContent);

            // refresh the tabs
            $("#tabs").tabs("refresh");
  }
            // obtén la lista de mini tabs y su contenido
            var tabList = document.querySelector('.w-tab-menu');
            var tabContent = document.querySelector('.w-tab-content');

            // cuenta el número de mini tabs existentes
            var tabCount = tabList.children.length;

            // obtén el botón "Agregar proyecto"
            var addTabButton = document.querySelector('button[type="submit"]');

            // escucha el evento click del botón "Agregar proyecto"
            addTabButton.addEventListener('click', function() {
            // crea un nuevo elemento para la mini tab
            var newTab = document.createElement('a');
            newTab.setAttribute('data-w-tab', 'Tab ' + (tabCount + 1));
            newTab.setAttribute('class', 'w-inline-block w-tab-link');
            tabList.appendChild(newTab);

            // crea el contenido de la mini tab
            var newTabContent = document.createElement('div');
            newTabContent.setAttribute('data-w-tab', 'Tab ' + (tabCount + 1));
            newTabContent.setAttribute('class', 'w-tab-pane');
            tabContent.appendChild(newTabContent);

            // agrega el título a la mini tab
            newTab.innerHTML = '<div>Proyecto ' + (tabCount + 1) + '</div>';

            // agrega el contenido a la mini tab
            newTabContent.innerHTML = '<iframe src="{{ url_for('tables', project_number=' + (tabCount + 1) + ') }}" style="width:100%; height:500px;"></iframe>';
  
            // incrementa el contador de mini tabs
            tabCount++;
            });

          </script>
          
    </body>

{% endblock %}